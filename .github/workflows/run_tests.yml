# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the action will run. Triggers the workflow on push or pull request 
# events but only for the master branch
on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  tests:
   name: "Python ${{ matrix.python-version }}"
   # The type of runner that the job will run on
   runs-on: "ubuntu-latest"
   env:
     USING_COVERAGE: '3.7,3.8'
   strategy:
     matrix:
       python-version: ["3.7", "3.8"]
   
   steps:
     # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
     - uses: "actions/checkout@v2"
     - uses: "actions/setup-python@v1"
       with:
         python-version: "${{ matrix.python-version }}"
     - name: "Install dependencies"
       # Runs a set of commands using the runners shell
       run: |
         set -xe
         python -VV
         python -m site
         python -m pip install --upgrade pip setuptools wheel
         python -m pip install --upgrade coverage[toml] virtualenv tox tox-gh-actions
     
     # Runs a single command using the runners shell
     - name: "Run tox targets for ${{ matrix.python-version }}"
       run: "python -m tox"
